{% extends "base.html" %}
{% block content %}
{% load static %}
<script src="{% static '/js/validation.js' %}"></script>

<style>
    .counter{
        margin: 30px 30px 3px 0px;
        padding-left: 4px;
        padding-top: 20px;
    }
    .btn-text-right{
        display:      block;
        margin-left:  auto;
        margin-right: 5px;
        margin-bottom: 8px;
    }
    
</style>

<div class="container">
    <h1>
        {{add_cource_form.errors.name}}
    </h1>
    <div>
        <h3 class="text-center font-weight-bolder">
            Courses list 
        </h3>
        <h5 class="counter text-dark">Courses count: <i>{{ courses|length }}</i></h5>
        <!-- add courses button -->
        <button type="button" 
                class="btn-text-right btn btn-outline-dark" 
                data-toggle="modal" 
                data-target="#formModal"
                id="addbutton">
                Add
        </button>
    </div>
    <div>
        <ul class="list-group">
            
            {% for course in courses %}
            <li class="list-group-item list-group-item-dark">
                <span class="text-dark">Name: </span> {{ course.name }}
                <br>
                <span class="text-dark">Number: </span> {{ course.number }}
            </li>
            {% endfor %}
            
        </ul>
    </div>
</div>

<!-- add course form  -->
<div class="modal fade show" id="formModal" tabindex="-1" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content dark-modal">
            <div class="modal-header">
                <h3 class="modal-title" id="formModalLabel">Add course</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form method="POST" id="addCourseForm" class="needs-validation" novalidate="">
                {% csrf_token %}
                <div class="modal-body">
                    {% for input in add_cource_form %}
                        <div class="form-group row">
                            <div class="col-sm-9">
                                {{ input }}
                                <div class="invalid-feedback" id="{{ input.name }}Message">
                                    
                                    {% if input.name == 'name' %}
                                        {{add_cource_form.errors.name.0}}
                                    {% else %}
                                        {{add_cource_form.errors.number.0}}
                                    {% endif %}
                                    
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                    <div class="form-group">
                        <div class="form-check" is="checkbox">
                            <input class="form-check-input" type="checkbox" id="testPageCheck" onclick="checkValidation()">
                            <label class="form-check-label" for="testPageCheck">
                                I agree it's a test page
                            </label>
                            <div class="invalid-feedback">
                                You must agree before submitting.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>


{% if add_cource_form.errors %}

    {% if add_cource_form.errors.name %}

        <script>
            function buttonclick(){
                let elm = document.getElementById("courseName");
                elm.classList.add("is-invalid");
                var addbutton = document.getElementById("addbutton");
                addbutton.click();
            }
            document.onload = buttonclick();
            window.onload = buttonclick(); 
        </script>

    {% endif %}

    {% if add_cource_form.errors.number %}
    
        <script>
            function buttonclick(){
                let elm = document.getElementById("courseNumber");
                elm.classList.add("is-invalid");
                var addbutton = document.getElementById("addbutton");
                addbutton.click();
            }
            document.onload = buttonclick();
            window.onload = buttonclick(); 
        </script>

    {% endif %}


{% endif %}
    
{% endblock content %}